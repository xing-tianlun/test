## fsyc

2024/02/26_01day



```js
// dev.env.js
module.exports = merge(prodEnv, {
  NODE_ENV: '"development"',
  mode: '"development"',
  API_BASE_URL: '"http://47.110.12.205:22026"', //test
  DEBUG_MODE: true
})

assetsPublicPath: '/',
    // proxyTable: {
    //   '/api': { // '/api'是代理标识，用于告诉node，url前面是/api的就是使用代理的
    //     // target: "http://pdr-bj.forsaven.com/", //目标地址，一般是指后台服务器地址
    //     // target: "http://192.168.8.109:8085/", //目标地址，一般是指后台服务器地址
    //     target: "http://127.0.0.1:8085/", //目标地址，一般是指后台服务器地址 //部署地址
    //     changeOrigin: true, //是否跨域
    //     secure: false, // 如果是https接口，需要配置这个参数
    //     pathRewrite: { // pathRewrite 的作用是把实际Request Url中的'/api'用""代替
    //       '^/api': ''
    //     }
    //   }
    // },

    // Various Dev Server settings
    host: 'localhost', // can be overwritten by process.env.HOST
    port: 8080, // can be overwritten by process.env.PORT, if port is in use, a free one will be determined
    hot: true,
    autoOpenBrowser: true,

      
      
      const baseUrl = process.env.API_BASE_URL
// create an axios instance
const service = axios.create({
  // baseURL: baseUrl, // url = base url + request url
  // baseURL: '', // url = base url + request url
  baseURL: baseUrl,
```

```js
// request.js

const baseUrl = process.env.API_BASE_URL
console.log('======baseUrl======', baseUrl);
// create an axios instance
const service = axios.create({
  // baseURL: '/', // url = base url + request url
  baseURL: baseUrl,
  
  
// dev.env.js
  NODE_ENV: '"development"',
  mode: '"development"',
  API_BASE_URL: '"http://47.110.12.205:22026"', //test
// prod.env.js
  NODE_ENV: '"production"',
  mode: '"production"',
  API_BASE_URL: '/',
```

*// const baseUrl = 'http://47.110.12.205:22026/'*

const baseUrl = 'http://192.168.8.109:8085'

// create an axios instance

const service = axios.create({

  // baseURL: '/', // url = base url + request url

  baseURL:baseUrl,



goodsShelves storey positionNo shelf

```js
// dev 开发分支 旧版 SIM7400 旧版本暂存

// hq 开发分支 新版 R2000



ssh-keygen -t ed25519 -C "xingtianlun@forsaven.com"

alarmRuleForm_base
alarmRuleForm_product_device
alarmRuleForm_trigger_content
alarmRuleForm_noise_reduction_set
alarmRuleForm_push_notification


alarmRuleForm_base: {
        alarmRuleName: undefined,
        alarmLevel: undefined,
      },
        alarmRuleForm_product_device: {
        productList: undefined,
        productListCount: 0,
        deviceList: undefined,
        deviceListCount: 0,
        productL: [
          {
            proName: "传感器-勿动",
            id: 36,
          },
          {
            proName: "货架-勿动",
            id: 34,
          },
        ],
        deviceL:[]
      },
        alarmRuleForm_trigger_content: {
        alarmType: undefined,
        term: [],
        termArr: [
          {
            proId: "",
            dataAttrId: "",
            dataAttrList: [],
            conditions: "",
            value: "",
          }
        ],
      },
        termForm: {
        offlineTime: undefined,
        lostlineTime: undefined,
        lostlineCount: undefined,
      },
        alarmRuleForm_noise_reduction_set: {
        noiseReductionSet: []
      },
      noiseReductionSetForm: {
        alarmSilenceTime: undefined,
        alarmMaxCount: undefined,
      },
        alarmRuleForm_push_notification: {
        pushNotificationType: [],
        peopleList: undefined,
        peopleListCount: 0,
        peopleL: [],

      },
```



```js
国网综能（sgcc-web）

```

```js
<!-- 轮播图 -->
        <swiper></swiper>

'swiper': function (res) {
      import("../SystemHomepage/components/swiper.vue").then(
        function (module) {
          res(module.default);
        }
      ).catch(function(error){
        console.log(error)
      })
    },
```



```js
// http://192.168.8.211:8085/  服务器地址
```



```js
// IOT Management Platform
// 物联网管理平台
```

2268 4032

Sunset Drive  Virgil Arles

```js
// 登录服务器
ssh root@192.168.8.199
ssh 用户名@服务器地址

// 往服务器上传文件
cd /
cd /usr/share/nginx/html/
// 在服务器外上传文件
scp /Users/xingtianlun/Desktop/工作计划.md root@192.168.8.199:/usr/share/nginx/html/
scp 源文件地址 用户名@服务器地址:服务器目录
// 解压文件
unzip 文件名
// 删除文件
rm 文件名

ssh root@192.168.8.195
cd /usr/share/nginx/html/
unzip dist.zip

scp /Users/xingtianlun/Desktop/dist.zip root@192.168.8.195:/usr/share/nginx/html/
Fs<195>!@#
mv dist iot-platform-web

wget -r root@192.168.8.195:/usr/share/nginx/html/v20Prototype

大屏saxas=
192.168.8.195
large-screen-display


称重货架
192.168.8.188
rfid-admin

周转货架
192.168.8.188
rfid-admin-turnover
cd /usr/share/nginx/html/

物管平台
iot-platform-web

行车安全

202 开发环境
/usr/local/middleware/nginx/html/dev

驾驶员异常行为报警
// App
// 测试
192.168.8.173 /usr/local/middleware/nginx/html/sit/iot-apk/
// 演示
192.168.8.171 /usr/local/middleware/nginx/html/prod/iot-apk/

ali云
123.56.102.186
59.110.44.140
/data/middleware/nginx/html/
  

192.168.8.196
/home/webProject/webproject/resource/newgraph/






http://localhost:9527/#/redirect system/menu
http://localhost:9527/#/applicationFunction/statusStatistics
lsof -i :9527
kill PID
this.$parseQueryParams(params)

edge-forsaven-ui 边缘计算平台 （贾得数字化供电所可视化大屏）

"element-ui": "^2.15.14",

image: require('@/assets/overviewImg/u3.svg'), //Icon 的图像

pageType:
monitorType:
plateNumber:
date: 
startTime: 
endTime:
terminalId:


import moment from 'moment'
           :picker-options="pickerOptions"
pickerOptions: {
        disabledDate(time) {
          return time.getTime() > moment().endOf('day').valueOf();
        }
      },

```



```js'
/prod-api/bigScreen/permission/check/bigScreen_kqrjKN3Gp0
/permission/check/bigScreen_kqrjKN3Gp0
```

color: var(--bs-el-text) !important;

ackground: #759FCC;

TODO: 测试修改



```js
 + '/' + loginCode;
 + loginCode + '=' + token;

let loginCode = this.$store.state.user.userInfo && this.$store.state.user.userInfo.loginCode;
let loginCode = this.$store.state.user.userInfo && this.$store.state.user.userInfo.loginCode;
        let token = this.$store.state.user.userInfo && this.$store.state.user.userInfo.token;
```



```js

1291 完成方胜称重货架专利编写并通过初审 6
2432 根据测试大纲，测试项目问题，修改问题 15
2480 酒测管理-场站管理 2
2501 一次接线图渲染修改 4
2480 酒测管理-场站管理 4
2481 酒测管理-酒测一体柜 4
共计 35

```



```js
Siwu-IoT-Views
// 功能清单梳理
1. 项目管理
2. 素材库管理
3. 组件库管理
4. 数据源管理
5. 数据集管理
6. 大屏设计
7. 组件数据展示及更新


// 集成方案
1. 将大屏代码与物管平台代码整合，并将大屏相关目录添加到物管平台中，可以正常显示页面
2. 调试每个页面的功能及接口是否可以正常使用且无问题。
3. 大屏展示功能及页面数据更新调试
4. 组件如何关联数据问题的讨论及解决

// 工作清单
1. 大屏代码与无关平台代码整合，大屏目录添加及页面正常展示
2. 每个页面功能验证及接口验证调试
3. 大屏组件数据接入及数据自动更新
4. 大屏组件与物管平台企业关联，所展示的每个大屏和目录如何进行匹配调整
```





https://www.runoob.com/try/demo_source/movie.mp4

```js
:119
src/components/SystemHomepage/intelligentAccessControl.vue
  line-height: 6vh;
19.168.8.127
src/components/SystemHomepage/visitorSRecord.vue
:107
  line-height: 6vh;


this.$getRowData(300, 100, 1)

v-if="$hasPermiFlag(['deviceStatus:status'])"

v-hasPermi="['erp:zhuxiao:add']"
v-hasPermi="['deviceManage:status']"
4c3v526b38mj90v-positive-integer
v-positive-integer="'zeroCan'"
replace(/[^0-9]/g, '').replace(/^0+/g, '');
v-positive-integer-including-zero
v-positive-float
v-no-spaces
v-positive-string
.trim

save "暂存数据属性修改字段及传感器接口修改"
116.397453,
39.908923

console.log('config', config)

asyncToGenerator.js:6 Uncaught (in 

dev-api/bigScreen/type/list/bigScreenCatalog
http://gcpaas.gccloud.com/bigScreenServer/bigScreen/type/list/componentCatalog

http://gcpaas.gccloud.com/bigScreenServer/bigScreen/design/page?parentCode=&current=2&size=10&searchKey=&type=bigScreen

// 复制
import { copyToClipboard } from '@/utils/clipboard.js';
copyPath(text) {
      if(text) {
        copyToClipboard(text);
      }else {
        this.$message.warning('当前字段为空，不可复制');
      }
    },

      deviceAlarmFault: {
        xData: ["故障", "告警"]，
        yData: [
          {
            name: "",
            data: [100, 200]
        	}
        ]
      }

```





```js
1. scope.row.proModelEn + ':' + scope.row.proName

2. 所属网关
              <span>{{(scope.row.otaDeviceId ? scope.row.otaDeviceId + ':' : '') +  (scope.row.otaName ? scope.row.otaName : '')}}</span>

3. // 设备编号展示
所属网关
deviceNumber
m.deviceId + ':'
prop="deviceId"
  
4. 

```





```js 
nameEn
alarmLevel 告警等级
alarmType 告警类型

proId
proModelEn
产品列表
添加创建人 、修改人

网关设备名称:
所属网关:
.header-class
1689 设备安全认证-X.509证书认证
2023 解决 问题反馈表 2024.08.23 问题
1291 完成方胜称重货架专利编写并通过初审
border-radius: 11px;
border-top-left-radius: 11px;
    border-top-right-radius: 11px;
header-wrapper
border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
border-bottom-left-radius: 11px;
    border-bottom-right-radius: 11px;

module.exports = {
  title: '物管平台用户手册',
  description: '一个基于VuePress打造的文档',
  dest: 'dist/docs',
  base: '/docs/',
  assetsPublicPath: './',

  themeConfig: {
      nav: [
          {
            text: '文档',
            link: '/guide/',
            sidebar: {
              title: '指南',
              collapsable: false,
              children: [
                '',
                'getting-started',
                'directory-structure',
                'basic-config',
                'typescript-as-config',
                'assets',
                'markdown',
                'using-vue',
                'i18n',
                'deploy'
              ]
            },
          },
          // {
          //     text: 'Language',
          //     ariaLabel: 'Language Menu',
          //     items: [
          //     { text: 'Chinese', link: '/language/chinese/' },
          //     { text: 'Japanese', link: '/language/japanese/' }
          //     ]
          // }
      ]
  }
}


    
src/components/Breadcrumb/index.vue
:40
        matched = [{ path: '/', meta: { title: '首页' }}].concat(matched)
:50
      return name.trim().toLocaleLowerCase().indexOf('home'.toLocaleLowerCase())  !== -1;

src/layout/components/TagsView/index.vue
:23
      <!-- <li @click="closeAllTags(selectedTag)">关闭所有标签</li> -->

:296

src/router/index.js
:455
router.beforeEach((to, from, next) => {
  if (from.name !== null && to.name === null) {
    next('/404'); // 假设你有一个路径为 /404 的404页面
  } else {
    next();
  }
});

src/store/modules/permission.js

:47
if(menu.isShow === 'HIDDEN') {
          return; // 隐藏的目录不显示
        }
:67
:94
:115

:197            
accessedRoutes[0].children[0].meta = { ...accessedRoutes[0].children[0].meta, affix: true }

src/views/error-page/404.vue
:15
        <a href="" class="bullshit__return-home">返回</a>

:27
      return '网站管理员说您不能进入这个页面…'

```

```js
changePasswordSubmitHandleClose
changePasswordSubmit

7.12
前端修改问题
1. 设备数据 左侧设备列表太窄，需要加宽
2. 产品编号和设备编号不允许修改
3. 告警列表 每列宽度需要调整 
4. 设备数据中字体灰色，需要改为黑色
5. 分组监视 列太窄，需要加宽
6. 分组监视中，设备点击进去之后，设备数据是否要与设备数据样式保持一致
7. 设备数据	运行状态中，每列显示宽度需要调整、
8. 产品新增和编辑界面的数据校验级别一项隐藏

7.15
前端修改问题
1. 增加修改密码
2. 设备详情增加事件页签
3. 设备接入增加 topic 查看列表
4. 设备分组中，选择某个分组，点击新增分组，弹出界面中，父组名称里面显示的是“请选择设备”“”，需要改为请选择分组
5. 在告警查询中，无法确认告警。没有确认按钮

7.15
前端修改问题
1. 修改输入框校验
2. 修改websocket 端口
3. 修改移动仓开锁
4. 告警规则添加推送消息字段
5. 数据属性，添加时间间隔字段
6. 

7.17
1. 首页3	温度和湿度 与图片重叠，看不清楚，图片需要下移
2. 首页3	显示各个属性 的框，增加透明度，类似数字库房的
3. 首页2	首页中卡片标题目前只有属性名字，需要增加设备名字，组合显示（设备名+属性名）
4. 首页3	目前实时告警和台账表格的颜色相同，不容易识别，将实时告警的颜色做个修改，风格区分台账的

7.18
1. 产品配置、设备接入、设备分组 添加说明
2. 分组监视-设备列表修改
3. 分页添加重新加载判断
4. 修改数据指标，偏移量输入校验
5. 数据属性修改计算规则数据属性，产品改为设备

7.19
1. 修改产品数据属性新增时间隔时间不能修改
2. 可配置告警声音调试
3. 大屏3接口调试
4. 首页2修改展示列宽
5. 添加提示标识
6. 修改开锁传参
7. 去掉 产品认证方式 新增、展示、产品信息
8. 场景联动-新增第二步，切换产品重置 服务及服务输出参数列表

EventBus
EventBus.
this.$eventBus.
```

```js
src/views/applicationFunction/alarmManage/realtimeAlarm.vue   
:331
if(params.type === "alarm" || params.type === "audio") {

src/components/AlarmNumber/index.vue
:148
  if(params.type === "audio") {
            this.alarmAudio();
            if(this.timer) clearTimeout(this.timer);
            this.timer = setTimeout(() => {
              this.getRealAlarmModuleSum();
            }, 1000)
          }else if(params.type === "alarm") {
            if(this.timer) clearTimeout(this.timer);
            this.timer = setTimeout(() => {
              this.getRealAlarmModuleSum();
            }, 1000)
          }else if(params.type === "data") {
            this.sendRealDataEvent(params);
          }
  

  
```



```js
1.	主要工作及完成质量
		1)主要对物管平台，V2.0版本进行开发，对小程序进行开发，大部分按期完成
2.	亮点及收获
		1)设备拓扑适应go.js 绘制，显示设备状态，及设备的数据。接触go.js ,绘制拓扑图，通过查询文档，及在网上查找问题解决方式，解决了拓扑图的绘制问题。
		2)阿里云上线后，首页打开慢，通过分析原因，查看到是部分打包出的js文件过大，通过修改打包配置文件后，将大的依赖单独进行打包，将部分依赖使用sdn,引入，解决了首页加载问题的问题。
3.	不足及主观、客观原因分析，应对措施
		1)在项目开发进行中，出现了在产品中修改了最基本的依赖字段，修改之后，项目中涉及的地方过多，在修改过程中，会出现漏改的问题，导致部分接口传值有误，出现问题。每次修改这种问题的是时候，时间过于紧张，导致测试时间不足，出现在上线前，还存在问题。这种修改不是说不能修改，而是需要在细致的讨论之后，给出一个合理的，满足现有条件的解决方案。也不要出现修改完成一版之后，又要更换类似的关键字段的情况。
4.	团队协作情况
		前端岗位，配合最紧密的就是后端，在后端为能及时提供接口时，前端可以优先开发其他的页面，或者修改其他问题。在开发过程中遇到不清楚的问题时，需要及时和产品经理进行确认，确保开发出的产品满足要求。
```





```jso
// 给表头加说明
              <el-table-column prop="createUser" show-overflow-tooltip>
                <template slot="header">
                  <el-tooltip
                    class="item"
                    effect="dark"
                    content="标签名称的解释文字"
                    placement="top"
                  >
                    <span> 修改人 <i class="el-icon-question"></i></span>
                  </el-tooltip>
                </template>
              </el-table-column>






          <!-- <el-divider></el-divider>
          <el-col :span="24">
            <p>数据属性寄存器存储信息</p>
          </el-col>
          <el-col :span="12">
            <el-form-item label="寄存器地址：" prop="registerAddress">
              <el-input
                type="input"
                size="small"
                v-model="dialogDataAttributeForm.registerAddress"
                clearable
                v-if="!dialogFormDataAttributeIsDisabled"
              ></el-input>
              <div v-else>
                {{ dialogDataAttributeForm.registerAddress }}
              </div>
              <div v-else>{{ dialogDataAttributeForm.registerAddress }}</div>
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item label="长度：" prop="length">
              <el-input
                type="input"
                size="small"
                v-model="dialogDataAttributeForm.length"
                clearable
                v-if="!dialogFormDataAttributeIsDisabled"
              ></el-input>
              <div v-else>
                {{ dialogDataAttributeForm.length }}
              </div>
              <div v-else>{{ dialogDataAttributeForm.length }}</div>
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item label="功能码：" prop="functionCode">
              <el-input
                type="input"
                size="small"
                v-model="dialogDataAttributeForm.functionCode"
                clearable
                v-if="!dialogFormDataAttributeIsDisabled"
              ></el-input>
              <div v-else>
                {{ dialogDataAttributeForm.functionCode }}
              </div>
              <div v-else>{{ dialogDataAttributeForm.functionCode }}</div>
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item label="数据运算：" prop="dataOperation">
              <el-input
                type="input"
                size="small"
                v-model="dialogDataAttributeForm.dataOperation"
                clearable
                v-if="!dialogFormDataAttributeIsDisabled"
              ></el-input>
              <div v-else>
                {{ dialogDataAttributeForm.dataOperation }}
              </div>
              <div v-else>{{ dialogDataAttributeForm.dataOperation }}</div>
            </el-form-item>
          </el-col>
        </el-row> -->

data: [
	{name: "运行状态"， id: 81},
	{name: "运行状态"， id: 82},
]


        // registerAddress: "", // 寄存器地址
        // length: "", // 长度
        // functionCode: "", // 功能码
        // dataOperation: "", // 数据运算

data: {
	header: [
		{name: "库房类型", lable: "roomTypeCode"},
		{name: "物品名称", lable: "goodsName"},
	],
	dataList: [
		{
			roomTypeCode: 123,
			goodsName: 345,
		},
		{
			roomTypeCode: 1234,
			goodsName: 3454,
		},
	],
	total: 2
}

{
  msg: "成功"，
  code: "A00000",
  data: [
    {name: "库房类型", lable: "roomTypeCode"},
    {name: "物品名称", lable: "goodsName"},
  ]
}

this.pageLoading = this.$loading({
                    lock: true,
                    text: 'Loading',
                    spinner: 'el-icon-loading',
                    background: 'rgba(255, 255, 255, 0.7)'
                  });
                  this.pageLoading.close();\

data: {
	xData: ["2018","2019","2020","2021","2022"],
	yData: [
		{
			name: "告警总数",
			data: [123,122,111,111,234]
		}
	]
}

data: [
        {name: "告警设备数量", value: this.dataForm.alarmDeviceNum},
        {name: "离线设备数量", value: this.dataForm.offlineDeviceNum},
        {name: "正常设备数量", value: this.dataForm.onlineDeviceNum},
      ]


scene_linkage_base: {
        sceneLinkageName: undefined,
        triggerCondition: undefined,
        alarmRule: undefined,
        repetitionRate: undefined,
        weekSelect: [],
        repetitionRateTime: undefined,
        deviceAttrArr: [
          {
            proId: "",
            propId: "",
            dataAttrList: [],
            term: "",
            value: "",
          }
        ],
      },
```



"axios-miniprogram-adapter": "^0.3.5",

```js
  background: #081b30;
#304157
#213753

	background-color: #263651;

  
          target: 'http://192.168.8.212:8081/',
          this.$get("/polymerization/test/login", param).then(res => {


1. 【APP可视化（数据统计、分析、趋势）】 接口调试 2
2. 【APP告警管理】接口调试 4
3. 【服务端订阅】页面开发 2
4. 【场景联动】页面开发 2

1. 【移动仓-定位地图】地图显示全屏


```







```js
resize()
import { debounce } from '@/utils'

    this.windowResize();

destroyed() {
    window.removeEventListener('resize', this.debouncedHandle);
  },

```

```js



// "@vue/cli-plugin-babel": "~5.0.0",
    // "@vue/cli-plugin-eslint": "~5.0.0",
    "@vue/cli-plugin-babel": "4.4.4",
    "@vue/cli-plugin-eslint": "4.4.4",
    // "@vue/cli-plugin-pwa": "~5.0.0",
    // "@vue/cli-plugin-router": "~5.0.0",
    // "@vue/cli-plugin-vuex": "~5.0.0",
    "@vue/cli-plugin-pwa": "4.4.4",
    "@vue/cli-plugin-router": "4.4.4",
    "@vue/cli-plugin-vuex": "4.4.4",
    "@vue/cli-service": "4.4.4",
    // "@vue/cli-service": "~5.0.0",
```



------



/propertyManageConfig/productManage.vue

​	/propertyManageConfig/productInform

// /propertyManageConfig/sideVirtualProduct.vue

/propertyManageConfig/deviceManage.vue

// 创建产品

/propertyManageConfig/createProduct



/propertyManageConfig/deviceGroup

// 拓扑配置

/propertyManageConfig/topologyConfig



//设备信息

/propertyManageConfig/deviceInfo

/propertyManageConfig/topicConfig



应用功能

/applicationFunction

设备数据

/applicationFunction/deviceData

设备拓扑

/applicationFunction/deviceTopology

分组监视

/applicationFunction/groupMonitor

视频监视

/applicationFunction/videoMonitor

设备日志

/applicationFunction/deviceLog

历史数据

/applicationFunction/historyData



告警类型

/alarm/alarmType

告警等级

/alarm/alarmGrade



数据分析

/applicationFunction/dataAnalysis/dataAnalysisIndex.vue

​	数据统计

/applicationFunction/dataAnalysis/dataStatistics.vue

​	数据分析

/applicationFunction/dataAnalysis/dataAnalyse.vue

​	数据趋势

/applicationFunction/dA/dataTrend

/applicationFunction/dataAnalysis/dataTrend.vue



// 告警管理

/applicationFunction/alarmManage/alarmManage.vue

// 实时告警

/applicationFunction/alarmManage/realtimeAlarm.vue

// 告警查询

/applicationFunction/alarmManage/alarmQuery.vue

// 数据参数
/propertyManageConfig/dataParameter
// 服务参数
/propertyManageConfig/serviceParameter



------



ws://192.168.100.241:3004/connect?id=1

http://192.168.8.212:82/live/cnRzcDovL3pmeDp6Zng5NzEyMTBAMTkyLjE2OC44LjE2L2NhbS9yZWFsbW9uaXRvcj9jaGFubmVsPTEmc3VidHlwZT0w/live.flv

http://192.168.8.101:8088/live/cnRzcDovL2hrd3M6ZnN5YzIwMjNAMTkyLjE2OC44LjE3L2gyNjQvY2gzMy9tYWluL2F2X3N0cmVhbQ==/live.flv

```js
created() {
    this.initWS();
},
methods: {
  	initWS() {
      if (typeof WebSocket === "undefined") {
        alert("您的浏览器不支持socket");
      } else {
        // 实例化socket
        this.socket = new WebSocket(this.path);
        // 监听socket连接
        this.socket.onopen = this.open;
        // 监听socket错误信息
        this.socket.onerror = this.error;
        this.socket.send = this.send;
        // 监听socket消息
        this.socket.onmessage = this.getMessage;
      }
    },
    destroyed() {
      this.socket.onclose = this.close; //离开路由之后断开websocket连接
    },
    open() {
      console.log("连接成功");
      this.getMessage();
    },
    error() {
      // setTimeout(()=>{
      //   this.initWS();
      // },500)
      console.log("连接错误")
    },
    getMessage(msg) {
      console.log('msg', msg)
      if (undefined !== msg) {
        const params = JSON.parse(msg.data);
        if (params.data !== undefined) {
          const acsParams = {
            "userId": params.data.employeeNoString,
            "userName": params.data.name,
            "ipAddress": params.data.ipAddress
          }
          orderCheck(acsParams)
          localStorage.setItem('user', this.loginForm.username);
          this.$router.push({ path: this.redirect || '/' })
          this.loading = false
        }
      }
    },
    send() {
      const params = {};
      this.socket.send(params);
    },
    close() {
      // console.log("socket已经关闭")
    },
},
destroyed() {
    this.socket.onclose = this.close; //离开路由之后断开websocket连接
  },
```



8 21

修改产品管理页面，系统管理-字典管理  页面开发

8 13

开发产品信息页面，修改边缘计算平台 使用 WebSocket 进行数据通信





 

```js
// 整理问题
1. 设备数据、历史数据、数据分析（3个页面）【一共5个页面】添加所属场景筛选
2. 以上5个页面：设备列表返回的数据会有改动，需要区分下边代设备类型的父级设备和子设备的层级关系，子设备样式向后缩进一点位置
3. 产品配置：增加边代设备类型，增加 品牌、型号字段
4. 设备注册页面：边代类型设备可以增加子设备，添加一个子设备配置的页面（只存在于设备类型是边代设备的情况下）
```

